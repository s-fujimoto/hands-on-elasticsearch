# 用語集
## 概念的な用語
#### 全文検索
文書から特定のキーワードを検索し、合致する文書を返す。

#### 順次走査検索
文書の最初から最後まで確認する。シンプル。Linux の grep コマンドや、SQL の LIKE 句が順次走査検索。

- 検索対象文書群が大量だとレスポンスが遅い
- 類似度を算出できない
- 文字の正規化とか、シノニムとかできない

#### インデックス検索
あるまとまりで抽出文字列をインデックス化する。インデックスから検索することで効率よく検索できる。

## ソフトウェア・サービス
#### Elasticsearch
OSS 検索/分析エンジン。クラスタ化、Web APIによる操作など、Lucene の拡張イメージ。

#### Lucene
OSS 検索エンジン。Java ライブラリ。Elasticsearch の全文検索、集計は Lucene にて行われている。

#### Amazon Elasticsearch Service
Elasticsearch クラスタを提供する AWS マネージドサービス。プロビジョニング、監視、運用／保守を AWS がいい感じにやってくれる。

## Elasticsearch 用語
### 論理構成
![](/img/logical.png)

#### インデックス
一番大きなデータの集まりの単位。

ちなみにElasticsearch ではインデックスという単語がよく使われる。

- データの集まりを表すインデックス
- フィールドを Tree 管理したインデックス
- 全文検索するための（転置）インデックス

#### タイプ
インデックスの中のフィールド、ドキュメントの集合。今後なくなっていく予定。

#### フィールド
RDB でいうカラム。タイプや、アナライザーを設定する。

#### ドキュメント
一つのドキュメント型データ（Elasticsearch では 1JSON が 1ドキュメント）

### 物理構成
![](/img/physical.png)

#### クラスタ
最も大きい物理構成の単位。

#### ノード
EC2 インスタンスの単位、正確にはプロセスの単位。

#### シャード
インデックス内のドキュメントを分割する単位。シャードにはプライマリシャード、レプリカシャードの 2種類がある。

#### プライマリシャード
優先して書き込みが行われる。

#### レプリカシャード
プライマリシャードのコピー。同期的にコピーされる。

### 検索
![](/img/analyzer.png)

#### アナライザー
1つのトークンフィルター、複数のキャラクターフィルター、複数のトークンフィルターから構成される

#### トークナイザー
トークンに分解するアルゴリズム。形態素解析とか、NGramとか。

- standard
- keyword
- kuromoji_tokenizer
- icu_tokenizer

#### キャラクターフィルター
文書に対して正規化。

- pattern_replace
- icu_normalizer
- mapping

#### トークンフィルター
トークナイザーにより分解されたトークンに対して正規化。

- stop
- stemmer
- lowercase
- length
- edgeNGram
- cjk_bigram
- ja_stop
- kuromoji_baseform
- kuromoji_part_of_speech
- kuromoji_stemmer
- kuromoji_readingform

#### kuromoji
日本語による検索、形態素解析するためのトークナイザー、キャラクターフィルター、トークンフィルターのセットのプラグイン。


